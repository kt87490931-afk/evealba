<?php if (!defined('_GNUBOARD_')) exit; ?>
<div class="page-wrap register-page-wrap">

  <!-- ===== STEP BAR ===== -->
  <div class="step-bar">
    <div class="step-item active" id="step-item-1">
      <div class="step-num">01</div>
      <div>
        <div class="step-label">STEP 01 &nbsp; ì•½ê´€ë™ì˜</div>
        <div class="step-sub">ì´ìš©ì•½ê´€ / ê°œì¸ì •ë³´ ë™ì˜</div>
      </div>
      <span class="step-icon">âš™ï¸</span>
    </div>
    <div class="step-item inactive" id="step-item-2">
      <div class="step-num">02</div>
      <div>
        <div class="step-label">STEP 02 &nbsp; íšŒì›ì •ë³´ì…ë ¥</div>
        <div class="step-sub">ê¸°ë³¸ ì •ë³´ ì…ë ¥</div>
      </div>
      <span class="step-icon">âœï¸</span>
    </div>
    <div class="step-item inactive" id="step-item-3">
      <div class="step-num">03</div>
      <div>
        <div class="step-label">STEP 03 &nbsp; ê°€ì…ì™„ë£Œ</div>
        <div class="step-sub">íšŒì›ê°€ì… ì™„ë£Œ</div>
      </div>
      <span class="step-icon">ğŸŒ¸</span>
    </div>
  </div>

  <!-- ================================================================
       STEP 1 : ì•½ê´€ë™ì˜
  ================================================================ -->
  <div id="screen-step1">

    <div class="form-card sh-pink">
      <div class="sec-head">
        <span class="sec-head-icon">ğŸ“œ</span>
        <span class="sec-head-title">íšŒì›ê°€ì… &amp; ì•½ê´€ë™ì˜</span>
        <span class="sec-head-sub">íšŒì›ê°€ì…ì„ ìœ„í•´ ì‹¤ëª…ì¸ì¦(ìœ ,ë¬´)/ì´ìš©ì•½ê´€/ê°œì¸ì •ë³´ë³´í˜¸ì •ì±…ì— ëŒ€í•œ ë‚´ìš©ì„ ì½ê³  ë™ì˜í•´ì£¼ì„¸ìš”.</span>
      </div>
    </div>

    <div class="form-card">
      <div class="terms-box-wrap">
        <div class="terms-box-title">ğŸ“‹ ì´ìš©ì•½ê´€</div>
        <div class="terms-scroll-box" id="terms1-scroll">
          <p><strong>ì œ 1ì¥ ì´ì¹™</strong></p><br>
          <p><strong>ì œ 1ì¡° (ëª©ì )</strong><br>
          ë³¸ ì•½ê´€ì€ ìœ í¥ì•Œë°” ì •ë³´ì œê³µ ì‚¬ì´íŠ¸ ì´ë¸Œì•Œë°”(ì´í•˜ 'íšŒì‚¬'ë¼ í•œë‹¤)ê°€ ì¸í„°ë„·ì„ í†µí•˜ì—¬ ìš´ì˜í•˜ëŠ” ì´ë¸Œì•Œë°”(www.evealba.com) ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•¨ì— ìˆì–´ ì´ë¥¼ ì´ìš©í•˜ëŠ” ì´ìš©ìì™€ ì´ë¸Œì•Œë°”ì˜ ê¶Œë¦¬, ì˜ë¬´ ë° ì±…ì„ì‚¬í•­ì„ ê·œì •í•¨ì„ ëª©ì ìœ¼ë¡œ í•œë‹¤.</p><br>
          <p><strong>ì œ 2ì¡° (ìš©ì–´ì˜ ì •ì˜)</strong><br>
          ì´ ì•½ê´€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ìš©ì–´ì˜ ì •ì˜ëŠ” ì´ë˜ì™€ ê°™ë‹¤.<br>
          â‘  'íšŒì‚¬'ë¼ í•¨ì€ ì¸í„°ë„· ì‚¬ì´íŠ¸ ì´ë¸Œì•Œë°”(www.evealba.com)ë¥¼ ìš´ì˜í•˜ëŠ” ì‚¬ì´íŠ¸ë¥¼ ë§í•œë‹¤.<br>
          â‘¡ 'ì„œë¹„ìŠ¤'ë¼ í•¨ì€ ì¸í„°ë„· ì´ë¸Œì•Œë°”(www.evealba.com) ë° ì •ë³´í†µì‹ ì„¤ë¹„ë¥¼ ì´ìš©í•˜ì—¬ ì•Œë°” ê¸°ì—…ì—ì„œ ë“±ë¡í•˜ëŠ” êµ¬ì¸ìë£Œ, êµ¬ì§ê³¼ êµìœ¡ì„ ëª©ì ìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ìë£Œ ë“±ì„ ê°ê°ì˜ ëª©ì ì— ë§ê²Œ ë¶„ë¥˜ ê°€ê³µ, ì§‘ê³„í•˜ì—¬ ì •ë³´ë¥¼ ì œê³µí•˜ëŠ” ë‚´ìš© ë° ê¸°íƒ€ ê´€ë ¨ëœ ë¶€ëŒ€ ì„œë¹„ìŠ¤ë¥¼ ë§í•œë‹¤.<br>
          â‘¢ 'ê°œì¸íšŒì›'ì´ë¼ í•¨ì€ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ê¸° ìœ„í•˜ì—¬ ë™ ì•½ê´€ì— ë™ì˜í•˜ê³  'íšŒì‚¬'ì™€ ì´ìš©ê³„ì•½ì„ ì²´ê²°í•˜ì—¬ 'ì´ìš©ìID'ë¥¼ ë¶€ì—¬ ë°›ì€ ê°œì¸ì„ ë§í•œë‹¤.<br>
          â‘£ 'ê¸°ì—…íšŒì›'ì´ë¼ í•¨ì€ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ê¸° ìœ„í•˜ì—¬ ë™ ì•½ê´€ì— ë™ì˜í•˜ê³  'íšŒì‚¬'ì™€ ì´ìš©ê³„ì•½ì„ ì²´ê²°í•˜ì—¬ 'ì´ìš©ìID'ë¥¼ ë¶€ì—¬ ë°›ì€ ë²•ì¸ ë˜ëŠ” ê°œì¸ì‚¬ì—…ìë¥¼ ë§í•œë‹¤.</p><br>
          <p><strong>ì œ 3ì¡° (ì•½ê´€ì˜ íš¨ë ¥ê³¼ ë³€ê²½)</strong><br>
          â‘  ì´ ì•½ê´€ì€ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ê³ ì í•˜ëŠ” ëª¨ë“  ì´ìš©ìì— ëŒ€í•˜ì—¬ ê·¸ íš¨ë ¥ì„ ë°œìƒí•œë‹¤.<br>
          â‘¡ íšŒì‚¬ëŠ” ê´€ë ¨ ë²•ë ¹ì— ìœ„ë°°í•˜ì§€ ì•ŠëŠ” ë²”ìœ„ì—ì„œ ì´ ì•½ê´€ì„ ê°œì •í•  ìˆ˜ ìˆë‹¤.<br>
          â‘¢ ì´ ì•½ê´€ì— ë™ì˜í•˜ëŠ” ê²ƒì€ ì •ê¸°ì ìœ¼ë¡œ ì›¹ì‚¬ì´íŠ¸ë¥¼ ë°©ë¬¸í•˜ì—¬ ì•½ê´€ì„ í™•ì¸í•  ì˜ë¬´ê°€ ìˆìŒì— ë™ì˜í•˜ëŠ” ê²ƒìœ¼ë¡œ ê°„ì£¼ë©ë‹ˆë‹¤.</p><br>
          <p><strong>ì œ 4ì¡° (ì„œë¹„ìŠ¤ì˜ ì œê³µ)</strong><br>
          â‘  íšŒì‚¬ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì—…ë¬´ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.<br>
          - ì¬í™” ë˜ëŠ” ìš©ì—­ì— ëŒ€í•œ ì •ë³´ ì œê³µ ë° êµ¬ë§¤ê³„ì•½ì˜ ì²´ê²°<br>
          - ê¸°íƒ€ íšŒì‚¬ê°€ ì •í•˜ëŠ” ì—…ë¬´</p>
        </div>
        <div class="terms-agree-row" id="agree1-row">
          <input type="checkbox" id="agree-terms" onchange="checkAgreements()">
          <label for="agree-terms">âœ… íšŒì›ì´ìš©ì•½ê´€ ë‚´ìš©ì— ë™ì˜í•©ë‹ˆë‹¤.</label>
        </div>
      </div>
    </div>

    <div class="form-card">
      <div class="terms-box-wrap">
        <div class="terms-box-title">ğŸ”’ ê°œì¸ì •ë³´ ë³´í˜¸ì •ì±…</div>
        <div class="terms-scroll-box" id="terms2-scroll">
          <p>ì´ë¸Œì•Œë°” (www.evealba.com ì´í•˜ 'íšŒì‚¬'ë¼ í•¨)ëŠ” ì´ìš©ìë“¤ì˜ ê°œì¸ì •ë³´ë³´í˜¸ë¥¼ ë§¤ìš° ì¤‘ìš”ì‹œí•˜ë©°,ì´ìš©ìê°€ íšŒì‚¬ì˜ ì„œë¹„ìŠ¤(ì´í•˜ 'ì´ë¸Œì•Œë°” ì„œë¹„ìŠ¤' ë˜ëŠ” 'ì´ë¸Œì•Œë°”'ë¼ í•¨)ë¥¼ ì´ìš©í•¨ê³¼ ë™ì‹œì— ì˜¨ë¼ì¸ìƒì—ì„œ íšŒì‚¬ì— ì œê³µí•œ ê°œì¸ì •ë³´ê°€ ë³´í˜¸ ë°›ì„ ìˆ˜ ìˆë„ë¡ ìµœì„ ì„ ë‹¤í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p><br>
          <p>ì´ì— íšŒì‚¬ëŠ” í†µì‹ ë¹„ë°€ë³´í˜¸ë²•,ì „ê¸°í†µì‹ ì‚¬ì—…ë²•,ì •ë³´í†µì‹ ë§ ì´ìš©ì´‰ì§„ ë° ì •ë³´ë³´í˜¸ ë“±ì— ê´€í•œ ë²•ë¥  ë“± ì •ë³´í†µì‹ ì„œë¹„ìŠ¤ì œê³µìê°€ ì¤€ìˆ˜í•˜ì—¬ì•¼ í•  ê´€ë ¨ ë²•ê·œìƒì˜ ê°œì¸ì •ë³´ë³´í˜¸ê·œì • ë° ì •ë³´í†µì‹ ë¶€ê°€ ì œì •í•œ ê°œì¸ì •ë³´ë³´í˜¸ì§€ì¹¨ì„ ì¤€ìˆ˜í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p><br>
          <p>íšŒì‚¬ëŠ” ê°œì¸ì •ë³´ ë³´í˜¸ì •ì±…ì„ í†µí•˜ì—¬ ì´ìš©ìë“¤ì´ ì œê³µí•˜ëŠ” ê°œì¸ì •ë³´ê°€ ì–´ë– í•œ ìš©ë„ì™€ ë°©ì‹ìœ¼ë¡œ ì´ìš©ë˜ê³  ìˆìœ¼ë©° ê°œì¸ì •ë³´ë³´í˜¸ë¥¼ ìœ„í•´ ì–´ë– í•œ ì¡°ì¹˜ê°€ ì·¨í•´ì§€ê³  ìˆëŠ”ì§€ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.</p><br>
          <p>íšŒì‚¬ëŠ” ê°œì¸ì •ë³´ ë³´í˜¸ì •ì±…ì„ í™ˆí˜ì´ì§€ ì²« íšŒë©´ì— ê³µê°œí•¨ìœ¼ë¡œì¨ ì´ìš©ìë“¤ì´ ì–¸ì œë‚˜ ìš©ì´í•˜ê²Œ ë³´ì‚´ ìˆ˜ ìˆë„ë¡ ì¡°ì¹˜í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p><br>
          <p><strong>1. ìˆ˜ì§‘í•˜ëŠ” ê°œì¸ì •ë³´ì˜ í•­ëª©</strong><br>
          íšŒì‚¬ëŠ” íšŒì›ê°€ì…, ìƒë‹´, ì„œë¹„ìŠ¤ ì‹ ì²­ ë“±ì„ ìœ„í•´ ì•„ë˜ì™€ ê°™ì€ ê°œì¸ì •ë³´ë¥¼ ìˆ˜ì§‘í•˜ê³  ìˆìŠµë‹ˆë‹¤.<br>
          - í•„ìˆ˜í•­ëª©: ì´ë¦„, ìƒë…„ì›”ì¼, ì„±ë³„, ë¡œê·¸ì¸ID, ë¹„ë°€ë²ˆí˜¸, ë‹‰ë„¤ì„, ì´ë©”ì¼, ì—°ë½ì²˜<br>
          - ì„ íƒí•­ëª©: í”„ë¡œí•„ ì‚¬ì§„</p><br>
          <p><strong>2. ê°œì¸ì •ë³´ì˜ ìˆ˜ì§‘ ë° ì´ìš©ëª©ì </strong><br>
          íšŒì‚¬ëŠ” ìˆ˜ì§‘í•œ ê°œì¸ì •ë³´ë¥¼ ë‹¤ìŒì˜ ëª©ì ì„ ìœ„í•´ í™œìš©í•©ë‹ˆë‹¤.<br>
          - ì„œë¹„ìŠ¤ ì œê³µì— ê´€í•œ ê³„ì•½ ì´í–‰ ë° ì„œë¹„ìŠ¤ ì œê³µì— ë”°ë¥¸ ìš”ê¸ˆì •ì‚°<br>
          - íšŒì› ê´€ë¦¬, ì„œë¹„ìŠ¤ ê°œì„ , ì‹ ê·œ ì„œë¹„ìŠ¤ ê°œë°œ</p>
        </div>
        <div class="terms-agree-row">
          <input type="checkbox" id="agree-privacy" onchange="checkAgreements()">
          <label for="agree-privacy">âœ… ê°œì¸ì •ë³´ ë³´í˜¸ì •ì±…ì— ë™ì˜í•©ë‹ˆë‹¤.</label>
        </div>
      </div>
    </div>

    <div class="form-card">
      <div style="padding:12px 20px 10px;border-bottom:2px solid var(--pale-pink);">
        <div style="display:flex;align-items:center;gap:8px;">
          <span style="font-size:18px;">ğŸ“±</span>
          <span style="font-size:15px;font-weight:900;color:var(--dark);">ë³¸ì¸ì‹¤ëª…ì¸ì¦</span>
          <span style="font-size:12px;color:#aaa;margin-left:4px;">íœ´ëŒ€ì „í™” ì‹¤ëª…ì¸ì¦ì„ í•´ì£¼ì„¸ìš”.</span>
        </div>
      </div>
      <div class="verify-section">
        <div class="verify-box">
          <span class="verify-phone-img">ğŸ“±</span>
          <div class="verify-right">
            <p>ì¸ì¦ì‹œ ë³¸ì¸ì‹¤ëª… í™•ì¸ëœ ë¶„ ì–´ë– í•œ í˜•íƒœë¡œë„<br>
            <span>ê³ ê°ë‹˜ì˜ ì •ë³´ëŠ” ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</span><br>
            í•¸ë“œí°ìœ¼ë¡œ ì‹¤ëª…ì¸ì¦ì„ ì›í•˜ì‹œë©´ ì•„ë˜ ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.</p>
            <button class="btn-verify" type="button" onclick="doVerify()">
              ğŸ“² í•¸ë“œí° ì‹¤ëª…ì¸ì¦
            </button>
          </div>
        </div>
        <div class="verify-done" id="verify-done">
          <span class="verify-done-icon">âœ…</span>
          <span class="verify-done-text">ë³¸ì¸ì¸ì¦ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! íšŒì›ê°€ì…ì„ ê³„ì† ì§„í–‰í•´ì£¼ì„¸ìš”.</span>
        </div>
      </div>
    </div>

    <div class="join-type-btns" id="type-btns" style="display:none;">
      <button class="btn-type-biz" type="button" onclick="goStep2('biz')">
        ğŸ¢ ê¸°ì—…íšŒì› ê°€ì…í•˜ê¸°
        <span class="sub">ì±„ìš©ê³µê³  ë“±ë¡ê°€ëŠ¥</span>
      </button>
      <button class="btn-type-personal" type="button" onclick="goStep2('personal')">
        ğŸ‘¤ ê°œì¸íšŒì› ê°€ì…í•˜ê¸°
        <span class="sub">ì´ë ¥ì„œ ë“±ë¡ê°€ëŠ¥</span>
      </button>
    </div>

  </div>

  <!-- ================================================================
       STEP 2 : íšŒì›ì •ë³´ ì…ë ¥
  ================================================================ -->
  <div id="screen-step2" style="display:none;">

    <div class="form-card">

      <div class="reg-form-header">
        <span class="reg-form-title">ğŸ“ íšŒì›ê°€ì… ì •ë³´ì…ë ¥</span>
        <span class="reg-form-type-badge badge-biz" id="member-type-badge">ğŸ¢ ê¸°ì—…íšŒì›</span>
      </div>

      <div class="reg-notice">
        <span class="reg-notice-text">âœ… <strong>ëª¨ë“  í•­ëª©ì€ í•„ìˆ˜ ì…ë ¥ì‚¬í•­ì…ë‹ˆë‹¤.</strong></span>
        <button class="btn-re-verify" type="button" onclick="reVerify()">ğŸ“² íœ´ëŒ€í° ì¬ì¸ì¦</button>
      </div>

      <!-- ì•„ì´ë”” -->
      <div class="form-row">
        <div class="form-label">ì•„ì´ë”” <span class="req">*</span></div>
        <div class="form-cell col">
          <div style="display:flex;gap:8px;width:100%;">
            <input class="fi fi-md" id="inp-id" name="mb_id" type="text" placeholder="ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”" oninput="checkIdFormat()" required>
            <button class="btn-id-check" type="button" onclick="checkIdDuplicate()">ì¤‘ë³µí™•ì¸</button>
          </div>
          <span class="fi-hint" id="id-hint">4ì ì´ìƒ 15ìì´í•˜ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.</span>
        </div>
      </div>

      <!-- ë¹„ë°€ë²ˆí˜¸ -->
      <div class="form-row">
        <div class="form-label">ë¹„ë°€ë²ˆí˜¸ <span class="req">*</span></div>
        <div class="form-cell col">
          <div class="pw-wrap" style="max-width:280px;">
            <input class="fi" id="inp-pw" name="mb_password" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥" oninput="checkPw()" required>
            <span class="pw-toggle" onclick="togglePw('inp-pw','eye1')" id="eye1">ğŸ‘</span>
          </div>
          <span class="fi-hint" id="pw-hint">ì˜ë¬¸ + íŠ¹ìˆ˜ë¬¸ì ì¡°í•©, 4ì ì´ìƒ 12ìì´í•˜</span>
        </div>
      </div>

      <!-- ë¹„ë°€ë²ˆí˜¸ í™•ì¸ -->
      <div class="form-row">
        <div class="form-label">ë¹„ë°€ë²ˆí˜¸ í™•ì¸ <span class="req">*</span></div>
        <div class="form-cell col">
          <div class="pw-wrap" style="max-width:280px;">
            <input class="fi" id="inp-pw2" name="mb_password_re" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ì…ë ¥í•´ì£¼ì„¸ìš”" oninput="checkPw2()" required>
            <span class="pw-toggle" onclick="togglePw('inp-pw2','eye2')" id="eye2">ğŸ‘</span>
          </div>
          <span class="fi-hint" id="pw2-hint">ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ í•œ ë²ˆ ì…ë ¥í•´ì£¼ì„¸ìš”.</span>
        </div>
      </div>

      <!-- ì´ë¦„ -->
      <div class="form-row">
        <div class="form-label">ì´ë¦„ <span class="req">*</span></div>
        <div class="form-cell col">
          <input class="fi fi-md" id="inp-name" name="mb_name" type="text" placeholder="ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”" required>
          <span class="fi-hint" id="name-hint">íœ´ëŒ€í° ì¸ì¦ì‹œ ìë™ì…ë ¥ë©ë‹ˆë‹¤. (ë¯¸ì¸ì¦ì‹œ ì§ì ‘ ì…ë ¥)</span>
        </div>
      </div>

      <!-- ë‹‰ë„¤ì„ -->
      <div class="form-row">
        <div class="form-label">ë‹‰ë„¤ì„ <span class="req">*</span></div>
        <div class="form-cell col">
          <input class="fi fi-md" id="inp-nick" name="mb_nick" type="text" placeholder="ë‹‰ë„¤ì„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”" required maxlength="20">
          <span class="fi-hint">ê³µë°± ì—†ì´ í•œê¸€, ì˜ë¬¸, ìˆ«ìë§Œ ì…ë ¥ ê°€ëŠ¥ (2~20ì)</span>
        </div>
      </div>

      <!-- ìƒë…„ì›”ì¼ -->
      <div class="form-row">
        <div class="form-label">ìƒë…„ì›”ì¼ <span class="req">*</span></div>
        <div class="form-cell col">
          <div class="date-group">
            <select class="fi-select" id="inp-birth-y" name="mb_birth_y" required>
              <option value="">ë…„ë„</option>
              <?php for($y=2008; $y>=1950; $y--) echo '<option value="'.$y.'">'.$y.'</option>'; ?>
            </select><span>ë…„</span>
            <select class="fi-select" style="width:76px;" id="inp-birth-m" name="mb_birth_m" required>
              <option value="">ì›”</option>
              <?php for($m=1; $m<=12; $m++) echo '<option value="'.str_pad($m,2,'0',STR_PAD_LEFT).'">'.str_pad($m,2,'0',STR_PAD_LEFT).'</option>'; ?>
            </select><span>ì›”</span>
            <select class="fi-select" style="width:76px;" id="inp-birth-d" name="mb_birth_d" required>
              <option value="">ì¼</option>
              <?php for($d=1; $d<=31; $d++) echo '<option value="'.str_pad($d,2,'0',STR_PAD_LEFT).'">'.str_pad($d,2,'0',STR_PAD_LEFT).'</option>'; ?>
            </select><span>ì¼</span>
          </div>
          <span class="fi-hint">íœ´ëŒ€í° ì¸ì¦ì‹œ ìë™ì…ë ¥ë©ë‹ˆë‹¤. (ë¯¸ì¸ì¦ì‹œ ì§ì ‘ ì„ íƒ)</span>
        </div>
      </div>

      <!-- ì„±ë³„ -->
      <div class="form-row">
        <div class="form-label">ì„±ë³„ <span class="req">*</span></div>
        <div class="form-cell col">
          <div class="radio-group">
            <div class="radio-item"><input type="radio" name="mb_sex" id="g-m" value="M" checked><label for="g-m">ë‚¨ì</label></div>
            <div class="radio-item"><input type="radio" name="mb_sex" id="g-f" value="F"><label for="g-f">ì—¬ì</label></div>
          </div>
          <span class="fi-hint">íœ´ëŒ€í° ì¸ì¦ì‹œ ìë™ì…ë ¥ë©ë‹ˆë‹¤. (ë¯¸ì¸ì¦ì‹œ ì§ì ‘ ì„ íƒ)</span>
        </div>
      </div>

      <!-- ì´ë©”ì¼ -->
      <div class="form-row">
        <div class="form-label">ì´ë©”ì¼ <span class="req">*</span></div>
        <div class="form-cell">
          <div class="email-row">
            <input class="fi fi-sm" type="text" placeholder="ì´ë©”ì¼ ì•„ì´ë””" id="email-id" required>
            <span class="email-at">@</span>
            <input class="fi" style="width:140px;" type="text" id="email-domain" placeholder="ë„ë©”ì¸" required>
            <select class="fi-select" onchange="setEmailDomain(this)">
              <option value="">ì§ì ‘ì…ë ¥</option>
              <option value="gmail.com">gmail.com</option>
              <option value="naver.com">naver.com</option>
              <option value="daum.net">daum.net</option>
              <option value="kakao.com">kakao.com</option>
              <option value="hotmail.com">hotmail.com</option>
              <option value="yahoo.com">yahoo.com</option>
            </select>
          </div>
        </div>
      </div>

      <!-- ì—…ì¢… -->
      <div class="form-row">
        <div class="form-label">ì—…ì¢… <span class="req">*</span></div>
        <div class="form-cell">
          <select class="fi-select-full" style="max-width:280px;" id="inp-job-type" name="mb_9" required>
            <option value="">ì—…ì¢… ì„ íƒ</option>
            <option value="ë£¸ì‹¸ë¡±">ë£¸ì‹¸ë¡±</option>
            <option value="ë‹¨ë€ì£¼ì ">ë‹¨ë€ì£¼ì </option>
            <option value="ê°€ë¼ì˜¤ì¼€">ê°€ë¼ì˜¤ì¼€</option>
            <option value="ë…¸ë˜ë°©">ë…¸ë˜ë°©</option>
            <option value="í´ëŸ½">í´ëŸ½</option>
            <option value="ë°”(Bar)">ë°”(Bar)</option>
            <option value="í¼ë¸”ë¦­">í¼ë¸”ë¦­</option>
            <option value="ë§ˆì‚¬ì§€">ë§ˆì‚¬ì§€</option>
            <option value="í’€ì‚´ë¡±">í’€ì‚´ë¡±</option>
            <option value="ê¸°íƒ€">ê¸°íƒ€</option>
          </select>
        </div>
      </div>

      <!-- í•¸ë“œí° -->
      <div class="form-row">
        <div class="form-label">í•¸ë“œí° <span class="req">*</span></div>
        <div class="form-cell col">
          <input class="fi fi-md" id="inp-hp" name="mb_hp" type="tel" placeholder="010-0000-0000" required>
          <span class="fi-hint">'-' í¬í•¨í•˜ì—¬ ì…ë ¥í•´ì£¼ì„¸ìš”.</span>
        </div>
      </div>

      <!-- SMS ìˆ˜ì‹  ë™ì˜ -->
      <div class="form-row">
        <div class="form-label">SMSìˆ˜ì‹ ë™ì˜</div>
        <div class="form-cell">
          <div class="sms-row">
            <input type="checkbox" id="sms-agree" name="mb_sms" value="1" checked>
            <label for="sms-agree">SMSìˆ˜ì‹ ì— ë™ì˜í•©ë‹ˆë‹¤. &nbsp;<span>ìˆ˜ì‹ í—ˆìš©ì„ í•˜ì‹œë©´ ì¸ì¬ë¶„ë“¤ì´ ë¬¸ìë³´ë‚´ê¸° ê´€ë¦¬í•´ì§‘ë‹ˆë‹¤</span></label>
          </div>
        </div>
      </div>

      <!-- ============================================================
           ê¸°ì—…íšŒì› ì „ìš© ì„¹ì…˜
      ============================================================ -->
      <div id="biz-section" style="display:none;">
        <div style="padding:16px 20px 10px;border-top:3px solid var(--hot-pink);margin-top:8px;">
          <div style="display:flex;align-items:center;gap:8px;">
            <span style="font-size:18px;">ğŸ¢</span>
            <span style="font-size:15px;font-weight:900;color:var(--dark);">ê¸°ì—…íšŒì› ì¶”ê°€ì •ë³´</span>
            <span style="font-size:12px;color:#aaa;margin-left:4px;">ì‚¬ì—…ì ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</span>
          </div>
        </div>

        <!-- í™•ì¸ë¬¸ì„œ ì²¨ë¶€ -->
        <div class="form-row">
          <div class="form-label">í™•ì¸ë¬¸ì„œì²¨ë¶€ <span class="req">*</span></div>
          <div class="form-cell col">
            <div style="margin-bottom:6px;font-size:12px;color:#666;line-height:1.6;">
              ì²¨ë¶€ ì„œë¥˜ : <strong>ì‚¬ì—…ìë“±ë¡ì¦</strong><br>
              <span style="color:var(--hot-pink);">* jpg, png, gif, webp / ìµœëŒ€ 10MB</span>
            </div>
            <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;">
              <input type="file" id="inp-biz-doc" name="biz_doc" accept="image/jpeg,image/png,image/gif,image/webp" style="font-size:13px;" onchange="onBizDocChange(this)">
              <button type="button" class="btn-ocr-scan" id="btn-ocr" onclick="doOcrScan()" style="display:none;padding:6px 16px;border:none;border-radius:8px;background:linear-gradient(135deg,#4285f4,#34a853);color:#fff;font-size:12px;font-weight:700;cursor:pointer;">
                ğŸ” AI ìë™ì¸ì‹
              </button>
            </div>
            <div id="ocr-status" style="margin-top:6px;font-size:12px;display:none;"></div>
            <div id="biz-doc-preview" style="margin-top:8px;max-width:300px;display:none;">
              <img id="biz-doc-img" src="" style="width:100%;border-radius:8px;border:2px solid #eee;">
            </div>
          </div>
        </div>

        <!-- ì‚¬ì—…ìë²ˆí˜¸ -->
        <div class="form-row">
          <div class="form-label">ì‚¬ì—…ìë²ˆí˜¸ <span class="req">*</span></div>
          <div class="form-cell col">
            <input class="fi fi-md" id="inp-biz-num" name="mb_2" type="text" maxlength="10" placeholder="ìˆ«ì 10ìë¦¬ (- ìë™ì œê±°)" oninput="formatBizNum(this)" required>
            <span class="fi-hint" id="biz-num-hint">'-'ë¥¼ í¬í•¨í•´ë„ ìë™ìœ¼ë¡œ ìˆ«ìë§Œ ì…ë ¥ë©ë‹ˆë‹¤.</span>
          </div>
        </div>

        <!-- ìƒí˜¸ -->
        <div class="form-row">
          <div class="form-label">ìƒí˜¸ <span class="req">*</span></div>
          <div class="form-cell col">
            <input class="fi fi-md" id="inp-biz-name" name="mb_3" type="text" placeholder="ìƒí˜¸ëª… ì…ë ¥" required>
          </div>
        </div>

        <!-- ëŒ€í‘œì -->
        <div class="form-row">
          <div class="form-label">ëŒ€í‘œì <span class="req">*</span></div>
          <div class="form-cell col">
            <input class="fi fi-md" id="inp-biz-rep" name="mb_4" type="text" placeholder="ëŒ€í‘œìëª… ì…ë ¥" required>
          </div>
        </div>

        <!-- ì£¼ì†Œ -->
        <div class="form-row">
          <div class="form-label">ì£¼ì†Œ <span class="req">*</span></div>
          <div class="form-cell col">
            <input class="fi" id="inp-biz-addr" name="mb_5" type="text" placeholder="ì‚¬ì—…ì¥ ì£¼ì†Œ ì…ë ¥" style="width:100%;" required>
            <span class="fi-hint" style="color:#999;">ì‚¬ì—…ìë“±ë¡ì¦ì— ê¸°ì¬ëœ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</span>
          </div>
        </div>
      </div>
      <!-- /ê¸°ì—…íšŒì› ì „ìš© -->

      <div class="form-btns">
        <button class="btn-cancel" type="button" onclick="goStep1()">â† ì´ì „ìœ¼ë¡œ</button>
        <button class="btn-join" type="button" id="btn-submit" onclick="doJoin()">ğŸŒ¸ íšŒì›ê°€ì… ì™„ë£Œ</button>
      </div>
    </div>

  </div>

  <!-- ================================================================
       STEP 3 : ê°€ì…ì™„ë£Œ
  ================================================================ -->
  <div id="screen-step3" style="display:none;">
    <div class="complete-wrap">
      <div class="complete-icon">ğŸ‰</div>
      <h2 class="complete-title"><span>ì´ë¸Œì•Œë°”</span> íšŒì›ê°€ì…ì„ í™˜ì˜í•©ë‹ˆë‹¤!</h2>
      <p class="complete-sub" id="complete-msg">íšŒì›ê°€ì…ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.<br>ì´ë¸Œì•Œë°”ì˜ ë‹¤ì–‘í•œ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•´ë³´ì„¸ìš”.</p>
      <div class="complete-info-box">
        <div class="ci-row"><span class="ci-label">ì•„ì´ë””</span><span class="ci-val pink" id="ci-id">â€”</span></div>
        <div class="ci-row"><span class="ci-label">íšŒì›ìœ í˜•</span><span class="ci-val" id="ci-type">â€”</span></div>
        <div class="ci-row"><span class="ci-label">ì´ë¦„</span><span class="ci-val" id="ci-name">â€”</span></div>
        <div class="ci-row"><span class="ci-label">ê°€ì…ì¼</span><span class="ci-val" id="ci-date">â€”</span></div>
      </div>
      <div class="complete-btns">
        <button class="btn-goto-login" type="button" onclick="location.href='<?php echo G5_BBS_URL ?>/login.php'">ğŸ”‘ ë¡œê·¸ì¸í•˜ê¸°</button>
        <button class="btn-goto-main" type="button" onclick="location.href='<?php echo G5_URL ?>'">ğŸ  ë©”ì¸ìœ¼ë¡œ ì´ë™</button>
      </div>
    </div>
  </div>

</div>

<script>
var currentMemberType = 'biz';
var verifyDone = false;
var idChecked = false;
var checkedId = '';
var _baseUrl = <?php echo json_encode(rtrim(G5_URL, '/')); ?>;

function setStep(n) {
  [1,2,3].forEach(function(i){
    var el = document.getElementById('step-item-'+i);
    el.className = 'step-item ' + (i < n ? 'done' : i === n ? 'active' : 'inactive');
  });
  var labels = ['ì•½ê´€ë™ì˜','íšŒì›ì •ë³´ì…ë ¥','ê°€ì…ì™„ë£Œ'];
  document.getElementById('breadcrumb').innerHTML =
    '<a href="<?php echo G5_URL ?>">ğŸ  ë©”ì¸</a><span class="sep">â€º</span>'
    + '<a href="#" onclick="goStep1();return false;">íšŒì›ê°€ì…</a><span class="sep">â€º</span>'
    + '<span class="current">' + labels[n-1] + '</span>';
  window.scrollTo({top:0,behavior:'smooth'});
}

function showScreen(which) {
  ['step1','step2','step3'].forEach(function(s){
    document.getElementById('screen-'+s).style.display = (s === which) ? 'block' : 'none';
  });
}

function checkAgreements() {}

function doVerify() {
  verifyDone = true;
  document.getElementById('verify-done').classList.add('show');
  document.querySelector('.btn-verify').textContent = 'âœ… ì¸ì¦ì™„ë£Œ';
  document.querySelector('.btn-verify').style.background = 'linear-gradient(135deg,#2E7D32,#4CAF50)';
  document.querySelector('.btn-verify').style.animation = 'none';
  document.getElementById('agree-terms').checked = true;
  document.getElementById('agree-privacy').checked = true;
  document.getElementById('type-btns').style.display = 'grid';
  setTimeout(function(){
    document.getElementById('type-btns').scrollIntoView({behavior:'smooth',block:'center'});
  }, 300);
}

function goStep2(type) {
  if(!document.getElementById('agree-terms').checked) { alert('ì´ìš©ì•½ê´€ì— ë™ì˜í•´ì£¼ì„¸ìš”.'); return; }
  if(!document.getElementById('agree-privacy').checked) { alert('ê°œì¸ì •ë³´ ë³´í˜¸ì •ì±…ì— ë™ì˜í•´ì£¼ì„¸ìš”.'); return; }
  if(!verifyDone) { alert('ë³¸ì¸ì¸ì¦ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”.'); return; }
  currentMemberType = type;
  var badge = document.getElementById('member-type-badge');
  var bizSec = document.getElementById('biz-section');
  if(type === 'biz') {
    badge.textContent = 'ğŸ¢ ê¸°ì—…íšŒì›';
    badge.className = 'reg-form-type-badge badge-biz';
    bizSec.style.display = 'block';
    bizSec.querySelectorAll('input[required]').forEach(function(el){ el.disabled = false; });
  } else {
    badge.textContent = 'ğŸ‘¤ ê°œì¸íšŒì›';
    badge.className = 'reg-form-type-badge badge-personal';
    bizSec.style.display = 'none';
    bizSec.querySelectorAll('input[required]').forEach(function(el){ el.disabled = true; });
  }
  showScreen('step2');
  setStep(2);
}

function goStep1() {
  showScreen('step1');
  setStep(1);
}

function reVerify() {
  verifyDone = false;
  showScreen('step1');
  setStep(1);
  document.getElementById('verify-done').classList.remove('show');
  document.getElementById('type-btns').style.display = 'none';
  var btn = document.querySelector('.btn-verify');
  btn.textContent = 'ğŸ“² í•¸ë“œí° ì‹¤ëª…ì¸ì¦';
  btn.style.background = '';
  btn.style.animation = '';
  document.getElementById('agree-terms').checked = false;
  document.getElementById('agree-privacy').checked = false;
}

function checkIdFormat() {
  idChecked = false; checkedId = '';
  var val = document.getElementById('inp-id').value;
  var hint = document.getElementById('id-hint');
  if(val.length === 0) { hint.textContent = '4ì ì´ìƒ 15ìì´í•˜ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.'; hint.className = 'fi-hint'; }
  else if(val.length < 4) { hint.textContent = 'âš  4ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.'; hint.className = 'fi-hint err'; }
  else if(val.length > 15) { hint.textContent = 'âš  15ì ì´í•˜ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.'; hint.className = 'fi-hint err'; }
  else if(!/^[a-z0-9_]+$/.test(val)) { hint.textContent = 'âš  ì˜ë¬¸ì†Œë¬¸ì, ìˆ«ì, _ë§Œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.'; hint.className = 'fi-hint err'; }
  else { hint.textContent = 'âœ… ì‚¬ìš© ê°€ëŠ¥í•œ í˜•ì‹ì…ë‹ˆë‹¤. ì¤‘ë³µí™•ì¸ì„ í•´ì£¼ì„¸ìš”.'; hint.className = 'fi-hint ok'; }
}

function checkIdDuplicate() {
  var val = document.getElementById('inp-id').value.trim();
  if(!val || val.length < 4) { alert('ì•„ì´ë””ë¥¼ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš” (4ì ì´ìƒ).'); return; }
  var hint = document.getElementById('id-hint');
  hint.textContent = 'â³ í™•ì¸ì¤‘...'; hint.className = 'fi-hint';
  fetch(_baseUrl + '/eve_check_id.php', {
    method: 'POST',
    headers: {'Content-Type':'application/x-www-form-urlencoded'},
    body: 'mb_id=' + encodeURIComponent(val)
  })
  .then(function(r){ return r.json(); })
  .then(function(d){
    if(d.available) {
      hint.textContent = 'âœ… ì‚¬ìš© ê°€ëŠ¥í•œ ì•„ì´ë””ì…ë‹ˆë‹¤.';
      hint.className = 'fi-hint ok';
      idChecked = true;
      checkedId = val;
    } else {
      hint.textContent = 'âš  ' + (d.msg || 'ì´ë¯¸ ì‚¬ìš©ì¤‘ì¸ ì•„ì´ë””ì…ë‹ˆë‹¤.');
      hint.className = 'fi-hint err';
      idChecked = false;
    }
  })
  .catch(function(){
    hint.textContent = 'âš  í™•ì¸ ì‹¤íŒ¨. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.';
    hint.className = 'fi-hint err';
  });
}

function checkPw() {
  var val = document.getElementById('inp-pw').value;
  var hint = document.getElementById('pw-hint');
  var hasLetter = /[a-zA-Z]/.test(val);
  var hasSpecial = /[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?`~]/.test(val);
  if(val.length === 0) { hint.textContent = 'ì˜ë¬¸ + íŠ¹ìˆ˜ë¬¸ì ì¡°í•©, 4ì ì´ìƒ 12ìì´í•˜'; hint.className = 'fi-hint'; }
  else if(val.length < 4) { hint.textContent = 'âš  4ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.'; hint.className = 'fi-hint err'; }
  else if(val.length > 12) { hint.textContent = 'âš  12ì ì´í•˜ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.'; hint.className = 'fi-hint err'; }
  else if(!hasLetter) { hint.textContent = 'âš  ì˜ë¬¸ìë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.'; hint.className = 'fi-hint err'; }
  else if(!hasSpecial) { hint.textContent = 'âš  íŠ¹ìˆ˜ë¬¸ìë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤. (!@#$%^&* ë“±)'; hint.className = 'fi-hint err'; }
  else { hint.textContent = 'âœ… ì‚¬ìš© ê°€ëŠ¥í•œ ë¹„ë°€ë²ˆí˜¸ì…ë‹ˆë‹¤.'; hint.className = 'fi-hint ok'; }
  checkPw2();
}

function checkPw2() {
  var pw1 = document.getElementById('inp-pw').value;
  var pw2 = document.getElementById('inp-pw2').value;
  var hint = document.getElementById('pw2-hint');
  if(!pw2) { hint.textContent = 'ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ í•œ ë²ˆ ì…ë ¥í•´ì£¼ì„¸ìš”.'; hint.className = 'fi-hint'; }
  else if(pw1 !== pw2) { hint.textContent = 'âš  ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.'; hint.className = 'fi-hint err'; }
  else { hint.textContent = 'âœ… ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•©ë‹ˆë‹¤.'; hint.className = 'fi-hint ok'; }
}

function togglePw(inputId, eyeId) {
  var inp = document.getElementById(inputId);
  var eye = document.getElementById(eyeId);
  if(inp.type === 'password') { inp.type = 'text'; eye.textContent = 'ğŸ™ˆ'; }
  else { inp.type = 'password'; eye.textContent = 'ğŸ‘'; }
}

function syncNickFromName() {}

function setEmailDomain(sel) {
  if(sel.value) document.getElementById('email-domain').value = sel.value;
}

/* === ì‚¬ì—…ìë²ˆí˜¸ ìë™ í¬ë§· (- ì œê±°, ìˆ«ìë§Œ) === */
function formatBizNum(el) {
  var v = el.value.replace(/[^0-9]/g, '');
  if(v.length > 10) v = v.substring(0, 10);
  el.value = v;
  var hint = document.getElementById('biz-num-hint');
  if(v.length === 0) { hint.textContent = "'-'ë¥¼ í¬í•¨í•´ë„ ìë™ìœ¼ë¡œ ìˆ«ìë§Œ ì…ë ¥ë©ë‹ˆë‹¤."; hint.className = 'fi-hint'; }
  else if(v.length < 10) { hint.textContent = 'âš  10ìë¦¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”. (í˜„ì¬ '+v.length+'ìë¦¬)'; hint.className = 'fi-hint err'; }
  else { hint.textContent = 'âœ… ì˜¬ë°”ë¥¸ í˜•ì‹ì…ë‹ˆë‹¤.'; hint.className = 'fi-hint ok'; }
}

/* === ë¬¸ì„œ ì—…ë¡œë“œ ë¯¸ë¦¬ë³´ê¸° === */
function onBizDocChange(input) {
  var preview = document.getElementById('biz-doc-preview');
  var img = document.getElementById('biz-doc-img');
  var ocrBtn = document.getElementById('btn-ocr');
  if(input.files && input.files[0]) {
    var reader = new FileReader();
    reader.onload = function(e) {
      img.src = e.target.result;
      preview.style.display = 'block';
      ocrBtn.style.display = 'inline-block';
    };
    reader.readAsDataURL(input.files[0]);
  } else {
    preview.style.display = 'none';
    ocrBtn.style.display = 'none';
  }
}

/* === Gemini OCR ìë™ì¸ì‹ === */
var _ocrResult = null;
function doOcrScan() {
  var fileInput = document.getElementById('inp-biz-doc');
  if(!fileInput.files || !fileInput.files[0]) { alert('ë¬¸ì„œë¥¼ ë¨¼ì € ì²¨ë¶€í•´ì£¼ì„¸ìš”.'); return; }

  var btn = document.getElementById('btn-ocr');
  var status = document.getElementById('ocr-status');
  btn.disabled = true;
  btn.textContent = 'â³ AI ë¶„ì„ì¤‘...';
  status.style.display = 'block';
  status.innerHTML = '<span style="color:#4285f4;font-weight:600;">ğŸ¤– Gemini AIê°€ ë¬¸ì„œë¥¼ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤... (ì•½ 5~10ì´ˆ ì†Œìš”)</span>';

  var fd = new FormData();
  fd.append('biz_doc', fileInput.files[0]);

  fetch(_baseUrl + '/eve_ocr_scan.php', { method: 'POST', body: fd })
  .then(function(r){ return r.json(); })
  .then(function(d){
    btn.disabled = false;
    btn.textContent = 'ğŸ” AI ìë™ì¸ì‹';
    if(d.ok) {
      _ocrResult = { biz_num: d.biz_num||'', biz_name: d.biz_name||'', biz_rep: d.biz_rep||'', biz_addr: d.biz_addr||'', biz_type: d.biz_type||'', biz_item: d.biz_item||'' };
      var info = 'âœ… AI ìë™ì¸ì‹ ì™„ë£Œ!';
      if(d.biz_type) info += ' | ì—…íƒœ: <strong>'+d.biz_type+'</strong>';
      if(d.biz_item) info += ' | ì¢…ëª©: <strong>'+d.biz_item+'</strong>';
      status.innerHTML = '<span style="color:#2E7D32;font-weight:600;">'+info+'</span>';
      if(d.biz_num) document.getElementById('inp-biz-num').value = d.biz_num.replace(/[^0-9]/g,'').substring(0,10);
      if(d.biz_name) document.getElementById('inp-biz-name').value = d.biz_name;
      if(d.biz_rep) document.getElementById('inp-biz-rep').value = d.biz_rep;
      if(d.biz_addr) document.getElementById('inp-biz-addr').value = d.biz_addr;
      if(d.biz_num) formatBizNum(document.getElementById('inp-biz-num'));
    } else {
      _ocrResult = null;
      status.innerHTML = '<span style="color:#c00;font-weight:600;">âš  ' + (d.msg || 'AI ì¸ì‹ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì§ì ‘ ì…ë ¥í•´ì£¼ì„¸ìš”.') + '</span>';
    }
  })
  .catch(function(err){
    btn.disabled = false;
    btn.textContent = 'ğŸ” AI ìë™ì¸ì‹';
    _ocrResult = null;
    status.innerHTML = '<span style="color:#c00;font-weight:600;">âš  ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜. ì§ì ‘ ì…ë ¥í•´ì£¼ì„¸ìš”.</span>';
  });
}

/* === íšŒì›ê°€ì… ì œì¶œ === */
function doJoin() {
  var id = document.getElementById('inp-id').value.trim();
  var pw = document.getElementById('inp-pw').value;
  var pw2 = document.getElementById('inp-pw2').value;
  var name = document.getElementById('inp-name').value.trim();
  var birthY = document.getElementById('inp-birth-y').value;
  var birthM = document.getElementById('inp-birth-m').value;
  var birthD = document.getElementById('inp-birth-d').value;
  var emailId = document.getElementById('email-id').value.trim();
  var emailDomain = document.getElementById('email-domain').value.trim();
  var hp = document.getElementById('inp-hp').value.trim();
  var jobType = document.getElementById('inp-job-type').value;

  if(!id || id.length < 4) { alert('ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš” (4ì ì´ìƒ).'); return; }
  if(!idChecked || checkedId !== id) { alert('ì•„ì´ë”” ì¤‘ë³µí™•ì¸ì„ í•´ì£¼ì„¸ìš”.'); return; }
  if(!pw || pw.length < 4) { alert('ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš” (4ì ì´ìƒ).'); return; }
  if(pw.length > 12) { alert('ë¹„ë°€ë²ˆí˜¸ëŠ” 12ì ì´í•˜ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; }
  if(!/[a-zA-Z]/.test(pw)) { alert('ë¹„ë°€ë²ˆí˜¸ì— ì˜ë¬¸ìë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.'); return; }
  if(!/[!@#$%^&*()_+\-=\[\]{};\':"\\|,.<>\/?`~]/.test(pw)) { alert('ë¹„ë°€ë²ˆí˜¸ì— íŠ¹ìˆ˜ë¬¸ìë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤. (!@#$%^&* ë“±)'); return; }
  if(pw !== pw2) { alert('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.'); return; }
  if(!name) { alert('ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; }
  var nick = document.getElementById('inp-nick').value.trim();
  if(!nick) { alert('ë‹‰ë„¤ì„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; }
  if(nick.length < 2) { alert('ë‹‰ë„¤ì„ì€ 2ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; }
  if(!birthY || !birthM || !birthD) { alert('ìƒë…„ì›”ì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.'); return; }
  if(!emailId || !emailDomain) { alert('ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; }
  if(!hp) { alert('í•¸ë“œí° ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; }
  if(!jobType) { alert('ì—…ì¢…ì„ ì„ íƒí•´ì£¼ì„¸ìš”.'); return; }

  if(currentMemberType === 'biz') {
    var docFile = document.getElementById('inp-biz-doc');
    var bizNum = document.getElementById('inp-biz-num').value.trim();
    var bizName = document.getElementById('inp-biz-name').value.trim();
    var bizRep = document.getElementById('inp-biz-rep').value.trim();
    var bizAddr = document.getElementById('inp-biz-addr').value.trim();
    if(!docFile.files || !docFile.files[0]) { alert('í™•ì¸ë¬¸ì„œë¥¼ ì²¨ë¶€í•´ì£¼ì„¸ìš”.'); return; }
    if(!bizNum || bizNum.length !== 10) { alert('ì‚¬ì—…ìë²ˆí˜¸ 10ìë¦¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; }
    if(!bizName) { alert('ìƒí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; }
    if(!bizRep) { alert('ëŒ€í‘œìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; }
    if(!bizAddr) { alert('ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; }
  }

  var btn = document.getElementById('btn-submit');
  btn.disabled = true;
  btn.textContent = 'â³ ê°€ì… ì²˜ë¦¬ì¤‘...';

  var fd = new FormData();
  fd.append('mb_id', id);
  fd.append('mb_password', pw);
  fd.append('mb_password_re', pw2);
  fd.append('mb_name', name);
  fd.append('mb_nick', nick);
  fd.append('mb_birth', birthY + '-' + birthM + '-' + birthD);
  fd.append('mb_sex', document.querySelector('input[name="mb_sex"]:checked').value);
  fd.append('mb_email', emailId + '@' + emailDomain);
  fd.append('mb_hp', hp);
  fd.append('mb_sms', document.getElementById('sms-agree').checked ? '1' : '0');
  fd.append('mb_1', currentMemberType);
  fd.append('mb_9', jobType);

  if(currentMemberType === 'biz') {
    fd.append('mb_2', document.getElementById('inp-biz-num').value);
    fd.append('mb_3', document.getElementById('inp-biz-name').value);
    fd.append('mb_4', document.getElementById('inp-biz-rep').value);
    fd.append('mb_5', document.getElementById('inp-biz-addr').value);
    fd.append('biz_doc', document.getElementById('inp-biz-doc').files[0]);
    if(_ocrResult) fd.append('ocr_data', JSON.stringify(_ocrResult));
  }

  fetch(_baseUrl + '/eve_register_update.php', { method: 'POST', body: fd })
  .then(function(r){ return r.json(); })
  .then(function(d){
    btn.disabled = false;
    btn.textContent = 'ğŸŒ¸ íšŒì›ê°€ì… ì™„ë£Œ';
    if(d.ok) {
      document.getElementById('ci-id').textContent = id;
      document.getElementById('ci-name').textContent = name;
      var now = new Date();
      document.getElementById('ci-date').textContent =
        now.getFullYear() + '.' + String(now.getMonth()+1).padStart(2,'0') + '.' + String(now.getDate()).padStart(2,'0');
      if(currentMemberType === 'biz') {
        document.getElementById('ci-type').textContent = 'ğŸ¢ ê¸°ì—…íšŒì›';
        document.getElementById('complete-msg').innerHTML =
          'ğŸ¢ ê¸°ì—…íšŒì› ê°€ì… ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.<br>'
          + '<strong style="color:var(--hot-pink);">ê´€ë¦¬ì ìŠ¹ì¸ í›„ ë¡œê·¸ì¸ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</strong><br>'
          + 'ìŠ¹ì¸ê¹Œì§€ ì˜ì—…ì¼ ê¸°ì¤€ 1~2ì¼ ì†Œìš”ë©ë‹ˆë‹¤.';
      } else {
        document.getElementById('ci-type').textContent = 'ğŸ‘¤ ê°œì¸íšŒì›';
        document.getElementById('complete-msg').innerHTML =
          'ğŸ‘¤ ê°œì¸íšŒì› ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.<br>ì´ë ¥ì„œ ë“±ë¡ìœ¼ë¡œ ì›í•˜ëŠ” ì¼ìë¦¬ë¥¼ ì°¾ì•„ë³´ì„¸ìš”!';
      }
      showScreen('step3');
      setStep(3);
    } else {
      alert(d.msg || 'ê°€ì…ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
    }
  })
  .catch(function(err){
    btn.disabled = false;
    btn.textContent = 'ğŸŒ¸ íšŒì›ê°€ì… ì™„ë£Œ';
    alert('ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
  });
}
</script>
